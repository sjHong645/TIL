## 03 빅데이터 저장 기술 : NoSQL 

### NoSQL의 등장 

웹이 기하급수적으로 성장하면서 이미지, 동영상과 같은 `멀티미디어 데이터` 뿐만 아니라 SNS를 통해 작성되는 자유로운 형태의 `비정형 데이터`가 빠른 속도로 대량생산되고 있다.

이런 환경에서 `관계 데이터베이스`의 장점을 유지하려면 많은 비용이 든다. 

이에 대한 `대안`으로 제시된 것이 `NoSQL`이다. 

### NoSQL의 특징 

`NoSQL`은 빠른 속도로 생산되는 `비정형 데이터`를 저장하고 처리하기 위해 ACID를 위한 트랜잭션 기능을 제공하지 않는다. 

대신, 저렴한 비용으로 `여러 대의 컴퓨터`에 데이터를 `분산/저장/처리`하는 것이 가능한 DB이다. 

`NoSQL`은 관계 모델보다 `더 융통성 있는 데이터 모델`을 사용하고 `스키마 없이 동작`하기 때문에   
① 데이터 구조를 미리 정의할 필요가 없고  
② 수시로 그 구조를 바꿀 수 있어서 비정형 데이터를 저장하기에 적합하며 대부분 오픈 소스로 제공된다.

- 적합한 경우 

| 데이터베이스 | 내용 |
| --- | --- |
| 관계 데이터베이스 | 만약에 기업의 인사, 회계 자료와 같이 `일관성이 중요`하고 조인과 같은 `복잡한 질의 처리`가 필요한 `정형화된 데이터`를 관리하는 용도 |
| NoSQL | SNS를 통해 양산되는 이미지, 텍스트 데이터, 동영상 등과 같이 `빠른 속도`로 `많은 양이 생성`되지만 수정보다는 `삽입 연산` 위주의 데이터를 저장하고 관리하는 용도 |

- 비교 

| 구분 | 관계 데이터베이스 | NoSQL |
| --- | --- | --- |
| 처리 데이터 | 정형 데이터 | 정형/비정형 데이터 (반정형 포함) |
| 대용량 데이터 | 대용량 처리 시 성능 저하 | 대용량 처리 지원 |
| 스키마 | 미리 정해진 스키마 존재 | 스키마가 없거나 변경이 자유로움 |
| 트랜잭션 | 트랜잭션을 통해 일관성 보장 | 트랜잭션 지원 X |
| 검색 기능 | 조인 등 복잡한 검색 기능 제공 | 단순한 데이터 검색 기능 제공 |
| 확장성 | 클러스터 환경에 부적합 | 클러스터 환경에 적합 |
| 라이선스 | 고가의 라이선스 비용 | 오픈 소스 |
| 대표 프로그램 | Oracle, MySQL 등 | MongoDB, 카산드라 등 |

### NoSQL의 종류 

#### 키-값 (Key-Value) 데이터베이스 

: NoSQL의 가장 단순한 형태. 아래 그림과 같이 `키와 값`이 쌍으로 데이터가 저장된다.

![image](https://user-images.githubusercontent.com/64796257/189559400-9b61b9d7-c852-45b1-af41-3f55922436d0.png)

- 특징 
① 모든 형태의 값을 저장할 수 있고 질의 속도가 빠르다.  
②  `키`를 이용해서 `값 전체`를 검색할 수 있다.
③ `값 일부`를 검색하거나 `값`을 가지고 질의 할 수 없어서 별도의 처리가 필요하다

ex) Redis, DynamoDB

#### 문서기반(Document-Based) 데이터베이스 

: 아래 그림과 같이 `키와 문서`의 쌍으로 데이터를 저장한다.

![image](https://user-images.githubusercontent.com/64796257/189559593-c33326a9-e73c-4dab-8364-749c084b16eb.png)

- 특징 
① 트리 형태의 계층적 구조가 존재하는 JSON, XML 등과 같은 `반정형 형태의 문서`로 데이터를 저장
② 키를 통해 문서 전체를 검색하는 것 가능
③ XQuery와 같은 `특별한 문서 대상 질의 언어`를 이용하면 문서 내의 일부를 검색하거나 질의에 활용할 수 있다.

ex) MongoDB, CouchDB

#### 컬럼기반(Column-Based) 데이터베이스 

: `키와 컬럼 패밀리`의 쌍으로 데이터를 저장한다. 

`컬럼 패밀리`는 관련 있는 `컬럼 값`들이 모여서 구성되는데  
테이블에서 한 개의 `튜플`, 즉 한 개의 `행`을 구성하는 속성들의 모임으로 생각할 수 있다. 각 `행`을 구분하는 `키`로 각 컬럼 패밀리를 식별한다.

다만, 관계 데이터 모델의 테이블과 달리 `다양한 형태의 데이터`를 값으로 저장할 수 있어서 행마다 `컬럼의 구성`을 `다르게` 할 수 있다.

![image](https://user-images.githubusercontent.com/64796257/189559712-926d5c97-cf88-4d6f-94e3-4c36af2e3873.png)

ex) BigTable, HBase, Cassandra 등 

#### 그래프 기반(Graph-Based) 데이터베이스 

: `데이터` 뿐만 아니라 `데이터 간의 관계`를 표현하는데 적합하다

아래 그림과 같이 `노드`에 데이터를 저장하고 `간선`으로 데이터 간의 관계를 표현하는 그래프의 형태로  
`질의`는 `그래프 순회 과정`을 통해 처리한다.

다른 NoSQL 데이터와 달리 `트랜잭션을 통한 ACID`를 `지원`하며 `클러스터 환경`에는 `부적합`하다.

`연관 데이터를 추천`해주거나 `SNS의 친구 찾기` 질의를 효율적으로 수행하는데 적합한 데이터베이스이다.

![image](https://user-images.githubusercontent.com/64796257/189560039-426deabb-9e9f-461e-8731-cfb01b77fc38.png)

ex) Neo4J, OrientDB 등 




















