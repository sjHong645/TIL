## 01. JSP 처리 과정

웹 브라우저에 JSP 페이지에 해당하는 URL을 입력하면 톰캣 서버는 아래 그림과 같은 과정을 거쳐 JSP 페이지를 실행한다. 

![image](https://user-images.githubusercontent.com/64796257/147640271-8c810f41-c641-4c0d-afd7-29e4ec54c7a9.png)

WAS = Web Application Server / 서블릿 : 자바를 사용하여 웹페이지를 동적으로 생성하는 서버 측 프로그램 혹은 그 사양

WAS는 JSP 페이지에 대한 요청이 들어오면 다음과 같은 처리를 한다. 

- JSP에 해당하는 서블릿이 존재하지 않을 경우 (과정 1.1) 
  - JSP 페이지로부터 자바 코드를 생성한다. (과정 1.2)
  - 자바 코드를 compile 해서 서블릿 클래스를 생성한다 (과정 1.3)
  - 서블릿에 client 요청을 전달한다 (과정 2.1)
  - 서블릿이 요청을 처리한 결과를 응답으로 생성한다 (과정 2.2)
  - 응답을 웹 브라우저에 전송한다 (과정 3)

- JSP에 해당하는 서블릿이 존재하는 경우(= 이미 과정 1.1 ~ 1.3을 거친 경우)
  - 서블릿에 클라이언트 요청을 전달한다 (과정 2.1)
  - 서블릿이 요청을 처리한 결과를 응답으로 생성한다 (과정 2.2)
  - 응답을 웹 브라우저에 전송한다 (과정 3)

즉, JSP 페이지를 요청할 때 JSP를 직접 실행하는 것이 아니라 

JSP를 자바 소스코드로 변환한 뒤 컴파일해서 생성한 `서블릿`을 실행하는 것이다. 

여기서 JSP 페이지를 자바 코드로 변경하는 단계를 `변환(translation) 단계(과정 1.2)`라 하고 

자바 코드를 서블릿 클래스로 변경하는 단계를 `컴파일(compile) 단게(과정 1.3)`라 한다. 

톰캣은 work 폴더에 `JSP를 변환한 자바 소스 코드`와 `서블릿 클래스`를 생성한다. 

![image](https://user-images.githubusercontent.com/64796257/147641199-26edc66d-1100-425c-8e48-506fe665a3df.png)

만약에 JSP 페이지를 변경하면 JSP 페이지는 기존에 이미 서블릿이 생성되었는지 여부와 상관없이 위에서 제시한 그림의 과정을 거쳐 JSP 페이지로부터 서블릿 클래스를 다시 생성한다. 
