코어 태그 라이브러리는 변수 설정이나 if-else와 같은 논리 처리에 사용되는 스크립트 코드를 대체하는 태그를 제공한다.

| 기능 분류 | 태그 | 설명 |
| --- | --- | --- |
| 변수 지원 | set | JSP에서 사용할 변수 설정 |
| | remove | 설정한 변수를 제거 |
| 흐름 제어 | if | 조건에 따라 내부 코드 수행 |
| | choose | 다중 조건을 처리할 때 사용 |
| | forEach | 컬렉션이나 Map의 각 항목을 처리할 때 사용 |
| | forTokens | 구분자로 분리된 각각의 토큰을 처리할 때 사용 |
| URL 처리 | import | URL을 사용해서 다른 자원의 결과 삽입 |
| | redirect | 지정한 경로로 리다이렉트 |
| | url | URL 재작성 |
| 기타 태그 | catch | Exception을 처리할 때 사용 |
| | out | JspWriter에 내용 출력 |

코어 태그 라이브러리를 사용하려면 JSP 페이지에 다음과 같은 taglib 디렉티브를 추가해야 한다.
``` jsp
<%@ taglib prefix = "c" uri = "http://java.sun.com/jsp/jstl/core" %>
```

prefix 속성에 지정한 값은 JSP 코드에서 코어 태그 라이브러리를 호출할 때 사용할 접두어가 된다.  

### 1 변수 지원 태그

변수 지원 태그는 JSTL이 지원하는 태그에서 사용할 수 있는 변수를 설정하기 위해 사용한다. 

#### 1) `<c:set>` 태그

`<c:set>` 태그는 EL 변수의 값이나 EL 변수의 프로퍼티 값을 지정할 때 사용한다.

`<c:set>` 태그의 첫 번째 사용방법은 `EL 변수를 생성하는 것`으로서 형식은 다음과 같다.
``` jsp
<c:set var="변수명" value = "값" [scope="영역"] />

<c:set var="변수명" [scope="영역"]>값 </c:set>
```

위 형식에서 각 속성은 다음과 같은 의미를 가진다.
- var : 값을 지정할 EL 변수의 이름을 지정한다.
- value : 변수의 값을 지정한다. 표현식, EL, 정적인 텍스트를 사용해서 값을 지정할 수 있다.
- scope : 변수를 저장할 영역을 지정한다. 값은 page, request, session, application 중 하나가 온다. 기본값은 page이다.

`<c:set>`태그는 scope 속성에서 지정한 영역에 값을 지정한다. 

예를 들어, scope 속성이 page이고 var 속성과 value 속성이 각각 "varName", "varValue"라고 하자.  

이 경우 내부적으로 pageContext.setAttribute(varName, varValue, scope)를 호출해서 지정한 영역의 속성으로 설정한다.

ex) 사용예시
``` jsp
<%-- value 속성 사용 예시 --%>
<c:set var = "name" value = "최범균" /> # 속성의 이름을 name으로 하고 속성의 값은 "최범균"이 되도록 설정했다.

<c:set var = "name" value = "<%= m.getFirstName() %>" scope = "request" /> 
# 속성의 이름을 name으로 하고 속성의 값은 m.getFirstName()의 리턴값이 되도록 설정했다.

<c:set var = "name" value = "${m.lastName} ${m.firstName}" /> 
# 속성의 이름을 name으로 하고 속성의 값은 "${m.lastName} ${m.firstName}"이 되도록 설정했다.

<%-- 태그의 몸체를 값으로 사용하는 경우 --%>  
<c:set var = "name"> 최범균 </c:set>
<c:set var = "name"> <%= m.getFirstName() %> </c:set>
<c:set var = "name"> ${m.firstName} </c:set>

```
`<c:set>` 태그의 두 번째 사용방법은 객체의 프로퍼티 값을 설정하는 것이다.

``` jsp
<c:set target = "대상" property = "프로퍼티이름" value = "값" />

<c:set target = "대상" property = "프로퍼티이름">값</c:set>
```
- target : 프로퍼티 값을 설정할 대상 객체 지정. 표현식, EL를 사용할 수 있고 자바빈 객체이거나 Map이어야 한다.
- property : 설정할 프로퍼티의 이름 지정. 
- value : 프로퍼티의 값을 지정

ex) 프로퍼티 값을 설정하기 위한 `<c:set>` 태그 사용
``` jsp
<% Member member = new Member() %>

<%-- member.setName("최범균1")과 동일 --%>
<c:set target = "<%= member %>" property = "name" value = "최범균1" /> # member라는 객체에 name이라는 프로퍼티가 있다.
                                                                       # name이라는 프로퍼티에 "최범균1"이라는 값을 지정했다.
<%= member.getName() %>  # "최범균1"을 출력한다.

<c:set var = "m" value = "<%= member %>" /> # 이름이 m이라는 변수를 만들었다. 그 변수에 member 객체를 넣었다.

<%-- member.setName("최범균2")과 동일 --%>
<c:set target = "${m}" property="name" value="최범균2" /> # m이라는 객체에 name이라는 프로퍼티가 있다.
                                                         # name이라는 프로퍼티에 "최범균2"라는 값을 지정했다.
${m.name} # "최범균2"를 출력한다.

<% Map<String, String> prop = new HashMap<String, String>(); %>

<%-- prop.set("host", "localhost")와 동일 --%>
<c:set target = "<%= prop %>" property = "host" value = "localhost" /> # prop라는 객체에 host라는 첫 번째 문자열이 있다.
                                                                       # host라는 첫 번째 문자열과 대응되는 두 번째 문자열을 "localhost"라고 지정했다.
                                                                       
<%= prop.get("host") %> # "host"라는 문자열에 대응하는 두 번째 문자열 "localhost"를 출력한다.

```
target 속성을 지정할 때 주의할 점은 target 대상이 EL 변수인 경우 `${member}`와 같이 EL을 이용해서 설정해야 한다는 것에 주의하자.

- `<c:set>` 태그의 속성 설명 요악

| 속성 | 표현식/EL | 타입 | 설명 |
| --- | --- | --- | --- |
| var | 사용 불가 | String | EL 변수 이름 |
| value | 사용 가능 | Object | 변수에 할당할 값 |
| scope | 사용 불가 | String | 변수를 생성할 영역. 기본값은 page |
| target | 사용 가능 | Object | 프로퍼티 값을 설정할 객체 지정 |
| property | 사용 가능 | String | 프로퍼티 이름 |

#### 2) `<c:remove>` 태그

remove 태그는 set 태그로 지정한 변수를 삭제할 때 사용한다. 구문은 다음과 같다.
``` jsp
<c:remove var = "varName" [scope = "영역"] />
```

var 속성과 scope 속성은 set 태그의 두 속성과 동일한 의미를 갖는다.  
remove 태그를 사용할 때 주의할 점은 삭제할 변수의 scope를 지정하지 않으면 동일한 이름으로 저장된 모든 영역의 변수를 삭제한다는 점이다.

``` jsp
<c:set var="name" value = "최범균" scope="request" />
<c:set var="name" value = "최범균" scope="session" />
<c:remove var="name" />
```

똑같은 이름과 값을 가지지만 영역이 서로 다른 두 변수를 설정했다. 이때 `<c:remove>` 태그는 이름이 "name" 인 변수를 삭제하도록 했다.  

이 경우 모든 영역에 저장된 "name" 속성이 모두 삭제되므로 앞서 `<c:set>` 태그를 이용해서 설정한 두 변수가 함께 삭제된다.

서로 다른 영역에 동일한 이름을 갖는 변수가 존재하고 특정 영역에 속한 변수만 제거하고 싶다면, scope 속성으로 명확하게 영역을 지정해줘야 한다.

- 속성 요약

| 속성 | 표현식/EL | 타입 | 설명 |
| --- | --- | --- | --- |
| var | 사용 불가 | String | 삭제할 EL 변수 이름 |
| scope | 사용 불가 | String | 삭제할 변수가 포함된 영역 |

### 2 흐름 제어 태그

대표적인 흐름 제어 태그로 if, choose, forEach, forTokens 가 있다.

#### 1) `<c:if>` 태그

자바 언어의 if와 비슷한 기능을 제공한다. 중첩된 if-else 블록과 같은 효과를 낼 순 없지만 단순한 if 블록을 쉽게 대체할 수 있다.

``` jsp
<c:if test = "조건">

...

</c:if>
```

test 속성은 true나 false에 해당하는 값이 온다. 조건 값이 true이면 `<c:if>` 태그의 몸체 내용을 처리한다. 
test 속성은 표현식이나 EL 또는 정적 문자열을 값으로 가질 수 있다.(Deferred Expression은 값으로 가질 수 없다)

``` jsp
<c:if test = "true"> ... </c:if> # 항상 true이다. 
 
<c:if test = "some text"> ... </c:if> # 항상 false이다. 

<c:if test = "${expr}"> ... </c:if> # EL의 결과값이 true이면 body 부분을 실행한다.

<c:if test = "<%= expr %>"> ... </c:if> # 표현식의 결과값이 true이면 body 부분을 실행한다.
```

`<c:if>` 태그의 test 속성의 계산 결과를 var 속성으로 지정한 EL 변수에 저장할 수 있다. 

ex) `<%= someCondition %>`의 값(test 속성의 계산 결과)을 testResult라는 EL 변수(var 속성으로 지정한 값)에 저장한다.
``` jsp
<c:if test="<%= someCondition %>" var="testResult" >
...

</c:if>
```

예제) use_if_tag.jsp 
``` jsp
<%@ page contentType = "text/html; charset=utf-8" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<html>
<head><title>if 태그</title></head>
<body>
<c:if test="true"> # test 속성의 값이 "true"이기 때문에 body 부분을 실행한다.
무조건 수행<br>
</c:if>

<c:if test="${param.name == 'bk'}"> # name이라는 파라미터 값이 bk라면 body 부분이 실행된다.
                                    # 이 부분이 실행되기 위해서는 ?name=bk 를 URL에 붙여줘야 한다.
name 파라미터의 값이 ${param.name} 입니다.<br>
</c:if>

<c:if test="${18 < param.age}"> # age라는 파라미터 값이 18보다 크면 body 부분을 실행한다.
당신의 나이는 18세 이상입니다.
</c:if>
</body>
</html>
```
- 결과 창(http://localhost:8080/chap12/use_if_tag.jsp?name=bk&age=12 라고 입력)

![image](https://user-images.githubusercontent.com/64796257/149448693-d9fc3e9a-fc33-41fc-8ec9-76610606100a.png)

- 속성 요약

| 속성 | 표현식/EL | 타입 | 설명 |
| --- | --- | --- | --- |
| test | 사용 가능 | boolean | 검사 조건 |
| var | 사용 불가 | String | 검사 조건의 계산 결과값을 저장할 EL 변수 |
| scope | 사용 불가 | String | 삭제할 변수가 포함된 영역 |

#### 2) `<c:choose>`, `<c:when>`, `<c:ohterwise>` 태그




#### 3) `<c:forEach>` 태그



#### 4) `<c:forTokens>` 태그



### 3 URL 처리 태그


#### 1) `<c:url>` 태그



#### 2) `<c:redirect>` 태그

 



### 4 기타 코어 태그


#### 1) `<c:out>` 태그



#### 2) `<c:catch>` 태그













