[문제](https://school.programmers.co.kr/learn/courses/30/lessons/77486)

[정답 출처](https://wellbell.tistory.com/159)

## 주요 내용

1) 이 문제를 `재귀 호출`을 이용해서 풀려고 했다.  
왜냐하면, `자신에게는 90%`, `추천인(트리의 부모)에게는 10%`를 반복했기 때문이다.

하지만, 최악의 경우를 고려했을 때 `enroll가 최대 길이 1만`을 갖고 `seller의 최대 길이 10만`을 가질 때  
트리의 높이가 enroll의 길이와 똑같이 `1만`을 가지고 모든 seller가 트리의 맨 밑에 위치한 값이라면 

1만 × 10만 = 10억 이라는 계산횟수가 나타날 수 있다. 

2) `DP`로 해결하는 건 아닐까 생각해봤지만 `최적 부분 구조`를 통해 해결할 문제는 아닌 것 같아 pass

결국, 정답 코드를 봤는데 `Map`을 통해서 반복적인 계산을 빠르게 할 수 있는 방식을 보고 감탄했다. 

구체적인 동작은 `코드`와 [출처 블로그](https://wellbell.tistory.com/159)를 보면 되겠다. 

## 정답 코드 

``` java
// 1차 - 8/9(화)
// 2차 - 8/16(화)
// 3차 - 8/23(화)
// 4차 - 8/30(화) - 정답을 봤어요 https://wellbell.tistory.com/159

import java.util.Map;
import java.util.HashMap;

class Solution {
    public int[] solution(String[] enroll, String[] referral, String[] seller, int[] amount) {
        int[] answer = new int[enroll.length];
        
        // key = 자식, value = 부모
        Map<String, String> parentMap = new HashMap<>(); 
        
        // key = 자신, value = enroll에서의 인덱스
        Map<String, Integer> memberIndexMap = new HashMap<>();
        
        for(int i = 0; i < enroll.length; i++) {
            parentMap.put(enroll[i], referral[i]);
            memberIndexMap.put(enroll[i], i);
        }
        
        for(int i = 0; i < seller.length; i++) {
            
            String nowSeller = seller[i]; // 지금 가리키고 있는 판매자
            int profit = amount[i] * 100; // i번째 seller가 벌어들인 이익
            
            // 추천인이 없을 때까지 반복한다
            while(!nowSeller.equals("-")) {
                
                int idx = memberIndexMap.get(nowSeller); // 현재 판매자가 enroll에 위치한 index값
                
                answer[idx] += (int)Math.ceil(profit * 0.9); // 자기 자신은 90%의 이익을 가져간다.
                
                profit -= (int)Math.ceil(profit * 0.9); // 10%는 자신의 추천인(= 트리의 부모)에게 넘긴다.
                
                nowSeller = parentMap.get(nowSeller); // 현재 판매자를 '자신의 추천인'으로 바꾼다.
                
                if(profit < 1) break; // 이익이 1원 미만이면 이익을 나누지 않고 자기가 모두 가져간다.
                
            }
            
        }
        
        return answer;
    }
}
```
