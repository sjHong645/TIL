[문제](https://school.programmers.co.kr/learn/courses/30/lessons/17678#)

[결정적이었던 5번 힌트](https://school.programmers.co.kr/questions/20374)

## 주요 내용

1) 버스와 승객은 먼저 오는대로 빠져나가야 하기 때문에 `FIFO` 구조를 갖고 있다고 판단해서 `큐`를 사용했다.  
그래서 `버스가 도착하는 시간`과 `승객이 도착한 시간`을 `큐`에 저장했다.

2) 매개변수로 주어진 `timetable`은 `오름차순`으로 정렬했다. 먼저 온 승객이 먼저 버스에 타야하기 때문이다. 

3) 코드가 동작할 때는 `대소비교`를 쉽게 하기 위해 시간값들을 `분단위`의 `정수형`으로 바꿨고   
   마지막에 반환할 때는 `hh:mm`과 같이 `String형`으로 변환했다.  
   ex) "10:20" = 620

### 결정적인 부분

```
마지막버스에 자리가 없으면 남은 인원 중 가장 "먼저" 도착한 사람이 아닌 가장 "마지막에" 도착한 사람보다 빨리 도착하면 된다.
```

계속 헤맸던 이유는 남은 인원 중 가장 `먼저` 도착한 사람보다 빨리 도착해야 한다고 생각했기 때문이다.  
이렇게 설정했을 때 나타나는 문제는 문제에서 주어진 `예제 2`를 통해서 알 수 있다. 

ex) 
```
승객 도착 시간 : 08:00, 09:09, 09:10
m, t를 통해 계산한 버스 도착 시간 : 09:00, 09:10

n = 버스 탑승 가능 인원 = 2
```

1) 09:00에 버스 도착 

`09:00 이전에 도착한 승객`은 `08:00에 온 승객 1명`인데 버스에는 `2명`까지 탈 수 있다.  
따라서, 09:00 버스에 탑승하려면 `09:00`에 도착하면 된다.

2) 09:10에 버스 도착 

`09:10 이전에 도착한 승객`은 `09:09에 온 승객`, `09:10에 온 승객`. 총 2명인데 버스에는 `2명`까지 탈 수 있다.  

- `가장 먼저온 승객(09:09)`보다 1분 빨리 온다면 `09:08`에 도착하면 된다.
- `가장 늦게온 승객(09:10)`보다 1분 빨리 온다면 `09:09`에 도착하면 된다. 

둘 중에 더 늦은 시각은 `후자`이므로 `09:10 버스`를 타기위해서는 `09:09`에 정거장에 도착하면 된다.



## 정답 코드 

``` java

import java.util.StringTokenizer;

import java.util.Arrays;

import java.util.Queue;
import java.util.LinkedList;

import java.util.Iterator;

class Solution {
    public String solution(int n, int t, int m, String[] timetable) {
        
        // 승객들이 빨리 도착한 순서로 정렬
        Arrays.sort(timetable);
        
        // 승객 도착 순서 큐
        Queue<Integer> passengerQue = new LinkedList<>();
        
        for(int i = 0; i < timetable.length; i++) {
            passengerQue.offer(convertStringToInt(timetable[i])); // String형을 int형으로 바꿔서 
        }
        
        // 버스 도착 시간 큐 
        Queue<Integer> busQue = new LinkedList<>();
        
        for(int i = 0; i < n; i++) busQue.offer(540 + i * t); // 버스는
        
        int myTime = 0; // 내가 버스에 탑승할 시간
        
        while(!busQue.isEmpty()) {
            
            int nowBus = busQue.poll(); // 현재 버스 시간
                        
            int psg = 0; // 현재 버스 시간에 탑승할 승객 수 
            for(int p : passengerQue) {
                if(p <= nowBus) psg++;
                
                else break;
            }
            
            // 현재 시간에 탑승할 승객이 m명이 넘는다면
            // 가장 늦게 온 사람보다 1분 일찍 온다.
            if(psg >= m) {
                                
                for(int i = 0; i < m; i++) {
                    
                    myTime = passengerQue.poll() - 1;
                    
                }
            }
                        
            // 탑승할 승객이 m명이 넘지 않는다면 
            // 버스가 도착할 시간에 딱 맞춰 오면 된다.
            else {
                
                myTime = nowBus; 
                for(int i = 0; i < psg; i++) passengerQue.poll();
                
            }      
            
        }
        
        return convertIntToString(myTime);
    }
    
    // String 형 시간 표현을 int형으로 변환
    int convertStringToInt(String time) {

        StringTokenizer st = new StringTokenizer(time, ":");
        
        int hour = Integer.parseInt(st.nextToken()) * 60; // 시간
        int minute = Integer.parseInt(st.nextToken()); // 분
        
        return hour + minute;
        
    }
    
    // int형 시간 표현을 String형으로 변환
    String convertIntToString(int time) {
        
        String result = "";
        
        // 시간
        int hour = time / 60; 
        
        if(hour < 10) result += "0" + Integer.toString(hour);
        
        else result += Integer.toString(hour);
        
        result += ":";
        
    
        // 분
        int minute = time % 60; 
        
        if(minute < 10) result += "0" + Integer.toString(minute);
        
        else result += Integer.toString(minute);
        
        return result;
        
        
    }
}
```
